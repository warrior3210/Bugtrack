# Project by Ananay Rampal
import MySQL.connector


from tabulate import tabulate

db = MySQL. connector. connect(
    host="localhost",
    user="root",
    password="password",
    database="bug_track"
)

cursor = db.cursor()



def login():
    while True:
        print("1. EMPLOYEE LOGIN")
        print("2. CUSTOMER ")
        print("3. Exit")

        choice = int(input("Enter your option: "))
        
            if choice == 1:
                print("\n----WELCOME TO LOGIN BLOCK----\n")
                login_id = input("Enter your login ID: ")
                password = input("Enter your password: ")

                 query = "SELECT * FROM employee WHERE empLoginId = %s AND empPassword = %s"
                cursor.execute(query, (login_id, password))
                result = cursor.fetchone()

                if result:
                    emp_type = result[2]  # Get the employee type (Admin or Expert)
                   if emp_type == "ADMIN":
                    admin_module()
                elif emp_type == "EXPERT":
                    expert_module()
            if choice == 2:
                    customer_module()

            if choice == 3:
                 break
        


def admin_module():
    while True:
        
            print("\n-----WELCOME TO THE ADMIN MODULE-----\n ")
            print("1. Customer Services")
            print("2. Employee Services")
            print("3. Bug Services")
            print("4. Logout")

            choice = int(input("Enter your choice: "))

            if choice == 1:
                customer_services()
            elif choice == 2:
                employee_services()
            elif choice == 3:
                bug_services()
            elif choice == 4:
                break
            else:
                print("\n---Invalid choice!--- ")
        




def customer_services():
    while True:
        try:
            print("\n-----WELCOME TO THE CUSTOMER SERVICES.-----\n")
            print("1. View All Customers")
            print("2. Search Customers by Name")
            print("3. Search Customers by Login ID")
            print("4. Go Back")

            choice = int(input("Enter your choice: "))


            if choice == 1:
                query = "SELECT * FROM customer"
                cursor.execute(query)
                results = cursor.fetchall()

                if results:
                    table = tabulate(results, headers=["ID", "Name", "Login ID", "Age", "Phone", "Email"],
                                     tablefmt="pretty")
                    print(table)

                else:
                    print("NO CUSTOMERS FOUND ")


               
            
             

                





      






















# Close the database connection
db.close()
